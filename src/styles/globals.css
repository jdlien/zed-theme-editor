@layer base, components, utilities;
@import 'tailwindcss';

/* Dark mode configuration - use class strategy */
@custom-variant dark (
  &:where(.dark, .dark *):where(:not(.light, .light *)),
  &:where(:not(.light, .light *)):where(@media (prefers-color-scheme: dark))
);

/* Theme colors using CSS custom properties */
:root {
  color-scheme: dark light;
}

.light {
  color-scheme: light;
}

.dark {
  color-scheme: dark;
}

/* Hue cycling animation for logo */
@keyframes hue-cycle {
  from {
    filter: hue-rotate(0deg);
  }
  to {
    filter: hue-rotate(360deg);
  }
}

.animate-hue-cycle {
  animation: hue-cycle 60s linear infinite;
}

@layer base {
  /* Zero-specificity focus ring for interactive elements.
       Easily overridden by any class or component. */
  :where(
    a,
    button,
    input,
    textarea,
    select,
    summary,
    [tabindex]:not([tabindex='-1']),
    [role='button'],
    [role='link'],
    [role='checkbox'],
    [role='radio'],
    [role='switch'],
    [role='tab'],
    [role='menuitem'],
    [role='option'],
    [role='combobox'],
    [role='slider'],
    [role='spinbutton']
  ):focus-visible {
    outline: 1px solid oklch(from var(--color-indigo-500) l c h / 0.5);
    @apply rounded;
  }
}

@layer components {
  .link {
    @apply text-indigo-600 hover:text-indigo-700 hover:underline dark:text-indigo-400 dark:hover:text-indigo-300;
  }

  .btn {
    @apply flex items-center gap-2 rounded border-indigo-500 bg-indigo-600 bg-linear-to-b from-indigo-500 to-indigo-600 px-3 py-1.5 text-sm text-white transition-colors enabled:hover:bg-indigo-500 enabled:hover:to-indigo-500 disabled:cursor-not-allowed disabled:opacity-50;
  }

  .input-group {
    @apply rounded-md border border-neutral-200/40 p-1 inset-shadow-sm dark:border-neutral-800/50 dark:bg-neutral-950/40;
  }
}

@layer utilities {
  .shadow-rim {
    box-shadow:
      0 1px 0.5px rgba(255, 255, 255, 0.3),
      inset 0 0px 4px rgba(0, 0, 0, 0.15);

    .dark & {
      box-shadow:
        0 1px 0.5px rgba(255, 255, 255, 0.25),
        inset 0 0px 4px rgba(0, 0, 0, 0.45);
    }
  }

  .shadow-edge {
    .dark & {
      box-shadow:
        0 -1px 0.5px rgba(255, 255, 255, 0.25),
        inset 0 0px 6px rgba(255, 255, 255, 0.05),
        0 4px 6px 0px rgba(0, 0, 0, 0.5);
    }
  }

  /* When switching themes, apply this class to make the transition animate */
  /* This was a fun experiment but it looks janky with CodeMirror */
  /*.theme-transitioning *,
  .theme-transitioning *::before,
  .theme-transitioning *::after {
    transition:
      background-color 0.4s 0.1s,
      color 0.4s 0.1s,
      border-color 0.4s 0.1s,
      box-shadow 0.4s 0.1s;
  }*/
}
